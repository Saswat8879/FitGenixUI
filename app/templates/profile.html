{# app/templates/profile.html #}
{% extends "layout.html" %}
{% block content %}
<div class="container">
  <div class="card max-w-2xl mx-auto">
    <div class="card-header">
      <h2 class="card-title">Profile</h2>
      <p class="card-description">Update your personal details and goals.</p>
    </div>
    
    <form method="post" action="{{ url_for('profile.profile') }}">
      <div class="card-content">
        <div class="form-group">
          <label class="form-label">Full name</label>
          <input class="form-control" name="full_name" value="{{ user.full_name or '' }}" disabled>
          <small class="text-muted text-sm">Name is disabled and cannot be changed.</small>
        </div>
        
        <div class="grid grid-cols-2 gap-4">
          <div class="form-group">
            <label class="form-label">Sex</label>
            <select class="form-control" name="sex">
              <option value="male" {% if user.sex=='male' %}selected{% endif %}>Male</option>
              <option value="female" {% if user.sex=='female' %}selected{% endif %}>Female</option>
              <option value="other" {% if user.sex=='other' %}selected{% endif %}>Other</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Birth Date</label>
            <input class="form-control" name="birth_date" type="date" value="{{ user.birth_date.strftime('%Y-%m-%d') if user.birth_date else '' }}">
          </div>
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div class="form-group">
            <label class="form-label">Height (cm)</label>
            <input class="form-control" name="height_cm" type="number" value="{{ user.height_cm or '' }}">
          </div>
          <div class="form-group">
            <label class="form-label">Weight (kg)</label>
            <input class="form-control" name="weight_kg" type="number" step="0.1" value="{{ user.weight_kg or '' }}">
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Activity level</label>
          <select class="form-control" name="activity_multiplier">
            <option value="1.2" {% if user.activity_multiplier==1.2 %}selected{% endif %}>Sedentary (little/no exercise)</option>
            <option value="1.375" {% if user.activity_multiplier==1.375 %}selected{% endif %}>Light (1-3 days/week)</option>
            <option value="1.55" {% if user.activity_multiplier==1.55 %}selected{% endif %}>Moderate (3-5 days/week)</option>
            <option value="1.725" {% if user.activity_multiplier==1.725 %}selected{% endif %}>Active (6-7 days/week)</option>
            <option value="1.9" {% if user.activity_multiplier==1.9 %}selected{% endif %}>Very active (hard daily exercise)</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">Goal</label>
          <select class="form-control" name="goal">
            <option value="maintain" {% if user.goal=='maintain' %}selected{% endif %}>Maintain</option>
            <option value="lose" {% if user.goal=='lose' %}selected{% endif %}>Lose</option>
            <option value="gain" {% if user.goal=='gain' %}selected{% endif %}>Gain</option>
          </select>
        </div>
      </div>
      
      <div class="card-footer" style="display: flex; justify-content: space-between; align-items: center;">
        {% if user.target_calories %}
          <div class="text-sm">
            <span class="text-muted">Target:</span> <strong>{{ user.target_calories|round }} Calories</strong>
          </div>
        {% endif %}
        <button class="btn btn-primary" type="submit" style="margin-left: auto;">Save profile</button>
      </div>
    </form>
  </div>
</div>
{% endblock %}